CREATE TABLE `Institution` (
  `institution_id` int primary key auto_increment,
  `name` varchar(50),
  `cnpj` varchar(14),
  `telephone` varchar(14),
  `address` varchar(150),
  `modality` varchar(15),
  `photo` blob,
  `active` bool
);


CREATE TABLE `Payment_History`(
`payment_history_id` int primary key auto_increment,
`date` Datetime,
`value` double,
`institution_id` int,
FOREIGN KEY  (institution_id)  REFERENCES Institution(institution_id)
);

CREATE TABLE `Admin` (
  `admin_id`  int primary key auto_increment,
  `email` varchar(50),
  `password` varchar(50),
  `credit_card` varchar(50),
  `institution_id` int,
	FOREIGN KEY  (institution_id)  REFERENCES Institution(institution_id)	
);


CREATE TABLE `Teacher` (
  `teacher_id` int primary key auto_increment,
  `name` varchar(30),
  `email` varchar(30),
  `phone` varchar(11),
  `registration` varchar(20),
  `password` varchar(20),
  `latts` varchar(50),
  `active` bool,
  `photo` VARBINARY(1000),
  `institution_id` int,
	FOREIGN KEY  (institution_id)  REFERENCES Institution(institution_id)	
);

CREATE TABLE `Course` (
  `course_id` int primary key auto_increment,
  `name` varchar(30),
  `knowledge_area` varchar(250),
  `workload` int,
  `modality` varchar(20),
   `institution_id` int,
	FOREIGN KEY  (institution_id)  REFERENCES Institution(institution_id)	
);

CREATE TABLE `Discipline` (
  `discipline_id` int primary key auto_increment,
  `name` varchar(50),
  `workload` int,
  `type_discipline` varchar(15),
  `modality` varchar(20),
  `teacher_id` int,
	FOREIGN KEY  (teacher_id)  REFERENCES Teacher(teacher_id)
);

CREATE TABLE `Class` (
  `class_id` int primary key auto_increment,
  `name` varchar(20)
);

CREATE TABLE `Course_Discipline` (
  `discipline_id` int,
	FOREIGN KEY  (discipline_id)  REFERENCES Discipline(discipline_id),
   `course_id` int,
	FOREIGN KEY  (course_id)  REFERENCES Course(course_id)
 
    
);


CREATE TABLE `Teacher_Discipline` (

    `discipline_id` int,
	FOREIGN KEY  (discipline_id)  REFERENCES Discipline(discipline_id),
   `teacher_id` int,
	FOREIGN KEY  (teacher_id)  REFERENCES Teacher(teacher_id),
    `class_id` int,
	FOREIGN KEY  (class_id)  REFERENCES Class(class_id)
);

CREATE TABLE `Task` (
  `task_id` int primary key auto_increment,
  `question` varchar(500),
  `file` VARBINARY(1000),
  `answer` varchar(500),
  `pontuation` varchar(10),
  `limit_date` datetime,
  `delivery_date` datetime,
  `rank` boolean,
  `reduction_factor` float,
  `grouped` boolean,
  `member_limiti` int,
  `class_id` int,
	FOREIGN KEY  (class_id)  REFERENCES Class(class_id)
);

CREATE TABLE `Report` (
  `report_id`  int primary key auto_increment,
  `pontuation` varchar(10),
  `data`  datetime,
  `correct` bool,
  `answer` VARBINARY(1000),
   `task_id` int,
	FOREIGN KEY  (task_id)  REFERENCES Task(task_id)
);
CREATE TABLE `Student` (
  `student_id` int primary key auto_increment,
  `name` varchar(30),
  `photo` VARBINARY(1000),
  `registration` varchar(20),
  `password` varchar(50),
  `telephone` varchar(15),
  `email` varchar(40),
  `address` varchar(150),
  `active` boolean
);

CREATE TABLE `Student_Class` (
  `student_id` int,
	FOREIGN KEY  (student_id)  REFERENCES Student(student_id),
   `class_id` int,
	FOREIGN KEY  (class_id)  REFERENCES Class(class_id)
);
CREATE TABLE `Team` (
  `team_id` int primary key auto_increment,
  `name` varchar(50),
  `task_id` int,
	FOREIGN KEY  (task_id)  REFERENCES Task(task_id)
);
CREATE TABLE `Student_Team` (
   `team_id` int,
	FOREIGN KEY  (team_id)  REFERENCES Team(team_id),
   `student_id` int,
	FOREIGN KEY  (student_id)  REFERENCES Student(student_id)
);